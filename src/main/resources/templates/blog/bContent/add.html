<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head th:include="include :: header"></head>
<link href="/css/layui.css" rel="stylesheet">
<link href="/css/style.css?v=4.1.0" rel="stylesheet">
</head>
<body class="gray-bg">
	<div class="wrapper wrapper-content">
		<div class="row">
			<div class="col-sm-12">
				<div class="ibox float-e-margins">
					<div class="ibox-content">
						<div class="col-sm-12">
							<h3>发布文章</h3>
						</div>
						<form class="form-horizontal m-t" id="signupForm">
							<input id="cid" name="cid" type="hidden">
							<div class="form-group">
								<label class="col-sm-1 control-label">标题：</label>
								<div class="col-sm-4">
									<input id="title" name="title" class="form-control" type="text">
								</div>
								<label class="col-sm-1 control-label">公众号：</label>
								<div class="col-sm-4">
									<select data-placeholder="--选择公众号--" name="wechatid"
										id="wechatid" class="form-control chosen-select" tabindex="2"
										required>
										<option value="">--选择公众号--</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<div class="col-sm-6">
                                    <button type="button" class="layui-btn" id="test1"
                                        style="width: 30%;">
                                        <i class="fa fa-cloud"></i>上传文章标题配图
                                    </button>
                                </div>
								<div class="image">
                                    <img id="pictureUrl" alt="" class="img-responsive">
                                </div>
                                <input id = "picture" type = "hidden" name = "picture"/>
							</div>
							<div class="form-group">
								<input id="content" name="content" type="hidden"> <label
									class="col-sm-1 control-label">内容：</label>
								<div class="col-sm-11">
									<div class="ibox-content no-padding">
										<div id="content_sn" class="summernote"></div>
									</div>
								</div>
							</div>
							<!-- <div class="form-group">
								<label class="col-sm-1 control-label">类型：</label>
								<div class="col-sm-11">
									<input id="categories" name="categories" class="form-control" type="text">
								</div>
							</div> -->
							<div class="form-group">
								<label class="col-sm-2 control-label">开启评论：</label>
								<div class="switch onoffswitch col-sm-1">
									<div class="onoffswitch">
										<input disabled="disabled" id="allowComment"
											name="allowComment" type="checkbox" value="0"
											class="onoffswitch-checkbox" id="example1"> <label
											class="onoffswitch-label" for="example1"> <span
											class="onoffswitch-inner"></span> <span
											class="onoffswitch-switch"></span>
										</label>
									</div>
								</div>

								<label class="col-sm-2 control-label">允许订阅：</label>
								<div class="switch onoffswitch col-sm-2">
									<div class="onoffswitch">
										<input disabled="disabled" id="allowFeed" name="allowFeed"
											type="checkbox" value="0" class="onoffswitch-checkbox"
											id="example3"> <label class="onoffswitch-label"
											for="example3"> <span class="onoffswitch-inner"></span>
											<span class="onoffswitch-switch"></span>
										</label>
									</div>
								</div>
								<input id="status" name="status" type="hidden">
							</div>
							<div class="text-right form-group">
								<a class="btn btn-default waves-effect waves-light"
									onclick="returnList()">返回列表</a>
								<button type="button"
									class="btn btn-primary waves-effect waves-light" type="submit">保存文章</button>
								<button type="button"
									class="btn btn-warning waves-effect waves-light"
									onclick="save(0)">存为草稿</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div th:include="include::footer"></div>


	<script type="text/javascript" src="/js/appjs/blog/bContent/add.js"></script>
	<script src="/js/content.js?v=1.0.0"></script>
	<script src="/js/layui.js"></script>
	<script src="/js/plugins/clipboard/clipboard.min.js"></script>
	<script src="/js/plugins/layer/layer.min.js"></script>
	<script src="/js/vue.min.js"></script>

	<script type="text/javascript">
		layui.use('upload', function() {
			var upload = layui.upload;
			//执行实例
			var uploadInst = upload.render({
				elem : '#test1', //绑定元素
				url : '/common/sysFile/upload', //上传接口
				size : 1000,
				accept : 'file',
				done : function(r) {
					$("#pictureUrl").attr("src",r.fileName);
					$("#picture").val(r.fileName);
					console.log(r);
					layer.msg(r.msg);
				},
				error : function(r) {
					layer.msg(r.msg);
				}
			});
		});
	</script>
</body>
</html>
